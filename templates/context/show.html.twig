{% extends 'base.html.twig' %}

{% block stylesheets %}<link rel="stylesheet" href="{{ asset('css/context/show.css') }}">{% endblock %}

{% block title %}DOMMA - Contexte de travail{% endblock %}

{% block body %}
    <main>
        <div class="separator">
            <h1>{{ context.title }}<a href="{{ path('context_edit', {'id': context.id}) }}"><i class="fa fa-pen icon-pen"></i></a></h1>
        </div>

        <div class="upload-files">
            <h2>Importer un fichier</h2>
            {{ form_start(form) }}
                {{ form_widget(form) }}
                <button class="btn-file">{{ button_label|default('Envoyer') }}</button>
            {{ form_end(form) }}
            <p id="file-name"></p>
        </div>

        <div class="imported-files">
            <h3>Fichiers import√©s</h3>
            {% for import in imports %}
                <div class="import-line">
                    {% if import.status == 'Fini avec erreur' %}
                        <p><i class="fa fa-exclamation-circle icon-erreur"></i><a href="{{ path('import_show', {'id': import.id}) }}">{{ import.fileName }}</a></p>
                        {{ include('import/_delete_form.html.twig') }}
                    {% else %}
                        <p><i class="fa fa-check-circle icon-check"></i><a href="{{ path('import_show', {'context': context.id, 'id': import.id}) }}">{{ import.fileName }}</a></p>
                        {{ include('import/_delete_form.html.twig') }}
                    {% endif %}
                </div>
            {% endfor %}
        </div>

    </main>
{% endblock %}

{% block javascripts %}
    <script type="text/javascript" charset="utf8" src="{{ asset('javascript/show_context.js') }}"></script>
{% endblock %}
